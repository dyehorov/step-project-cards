import Component from "./component.js";
import LoginForm from "./loginForm.js";
import VisitModal from "./visitModal.js"

export default class Header extends Component {
  constructor(classes) {
    const elements = {
      parent: document.body,
      self: document.createElement("header"),
      link: document.createElement("a"),
      loginBtn: document.createElement("button"),
      containerBtn: document.createElement("div"),
      createVisitBtn: document.createElement("button"),
      LogOutBtn: document.createElement("button"),
    };
    super(elements);
  }
  render() {
    const { self, link, loginBtn, createVisitBtn, LogOutBtn, containerBtn } =
      this.elements;
    self.classList.add("header-container");
    link.href = "#";
    link.innerHTML = `<svg
class="header-container-logo"
xmlns="http://www.w3.org/2000/svg"
width="796"
height="100"
viewBox="0 0 796 183"
fill="none"
>
<g clip-path="url(#clip0_203_14)">
  <rect y="50.5232" width="796" height="82.487" fill="#BE1F1E" />
  <line
    y1="57.7409"
    x2="796"
    y2="57.7409"
    stroke="white"
    stroke-opacity="0.3"
    stroke-width="2.06218"
    stroke-dasharray="7.22 7.22"
  />
  <line
    y1="123.73"
    x2="796"
    y2="123.73"
    stroke="white"
    stroke-opacity="0.3"
    stroke-width="2.06218"
    stroke-dasharray="7.22 7.22"
  />
  <g filter="url(#filter0_d_203_14)">
    <rect
      x="655"
      y="133"
      width="82"
      height="82"
      transform="rotate(-90 655 133)"
      fill="#BE1F1E"
    />
  </g>
  <rect
    x="654.741"
    y="182.502"
    width="182.503"
    height="82.4871"
    transform="rotate(-90 654.741 182.502)"
    fill="#BE1F1E"
  />
  <line
    x1="661.959"
    y1="182.502"
    x2="661.958"
    y2="-0.000152559"
    stroke="white"
    stroke-opacity="0.3"
    stroke-width="2.06218"
    stroke-dasharray="7.22 7.22"
  />
  <line
    x1="727.948"
    y1="182.502"
    x2="727.948"
    y2="-0.000152559"
    stroke="white"
    stroke-opacity="0.3"
    stroke-width="2.06218"
    stroke-dasharray="7.22 7.22"
  />
  <path
    d="M110.473 108.834L110.373 90.2294L101.346 105.374H96.9332L87.9568 90.7309V108.834H78.7798V73.7309H86.9538L99.2902 93.9905L111.326 73.7309H119.5L119.6 108.834H110.473ZM144.328 109.536C140.617 109.536 137.274 108.751 134.298 107.179C131.356 105.608 129.033 103.435 127.328 100.66C125.656 97.8853 124.82 94.7595 124.82 91.2825C124.82 87.8056 125.656 84.6798 127.328 81.9049C129.033 79.1301 131.356 76.957 134.298 75.3857C137.274 73.8144 140.617 73.0288 144.328 73.0288C148.039 73.0288 151.365 73.8144 154.307 75.3857C157.283 76.957 159.606 79.1301 161.278 81.9049C162.983 84.6798 163.835 87.8056 163.835 91.2825C163.835 94.7595 162.983 97.8853 161.278 100.66C159.606 103.435 157.283 105.608 154.307 107.179C151.365 108.751 148.039 109.536 144.328 109.536ZM144.328 101.312C146.1 101.312 147.704 100.894 149.142 100.058C150.58 99.2226 151.716 98.0525 152.552 96.5481C153.388 95.0102 153.806 93.255 153.806 91.2825C153.806 89.3101 153.388 87.5716 152.552 86.0672C151.716 84.5293 150.58 83.3425 149.142 82.5067C147.704 81.6709 146.1 81.253 144.328 81.253C142.556 81.253 140.951 81.6709 139.514 82.5067C138.076 83.3425 136.939 84.5293 136.104 86.0672C135.268 87.5716 134.85 89.3101 134.85 91.2825C134.85 93.255 135.268 95.0102 136.104 96.5481C136.939 98.0525 138.076 99.2226 139.514 100.058C140.951 100.894 142.556 101.312 144.328 101.312ZM169.036 73.7309H185.635C189.479 73.7309 192.889 74.4497 195.865 75.8872C198.84 77.3248 201.147 79.3641 202.785 82.0052C204.423 84.6463 205.242 87.7388 205.242 91.2825C205.242 94.8263 204.423 97.9188 202.785 100.56C201.147 103.201 198.84 105.24 195.865 106.678C192.889 108.115 189.479 108.834 185.635 108.834H169.036V73.7309ZM185.233 100.911C188.242 100.911 190.649 100.058 192.455 98.3534C194.293 96.6483 195.213 94.2914 195.213 91.2825C195.213 88.2737 194.293 85.9168 192.455 84.2117C190.649 82.5067 188.242 81.6542 185.233 81.6542H178.965V100.911H185.233ZM238.649 101.162V108.834H210.466V73.7309H237.997V81.4035H220.295V87.3209H235.891V94.7427H220.295V101.162H238.649ZM259.504 99.5068H254.089V108.834H244.159V73.7309H260.207C263.383 73.7309 266.141 74.2658 268.481 75.3356C270.821 76.372 272.626 77.8764 273.897 79.8489C275.167 81.7879 275.802 84.078 275.802 86.7191C275.802 89.2599 275.201 91.4831 273.997 93.3888C272.827 95.2609 271.139 96.7319 268.932 97.8017L276.505 108.834H265.873L259.504 99.5068ZM265.773 86.7191C265.773 85.081 265.255 83.8105 264.218 82.9079C263.182 82.0052 261.644 81.5539 259.605 81.5539H254.089V91.8342H259.605C261.644 91.8342 263.182 91.3996 264.218 90.5303C265.255 89.6277 265.773 88.3573 265.773 86.7191ZM314.679 73.7309V108.834H306.505L291.009 90.1292V108.834H281.28V73.7309H289.454L304.95 92.4359V73.7309H314.679ZM336.276 73.7309H352.875C356.72 73.7309 360.13 74.4497 363.105 75.8872C366.081 77.3248 368.387 79.3641 370.026 82.0052C371.664 84.6463 372.483 87.7388 372.483 91.2825C372.483 94.8263 371.664 97.9188 370.026 100.56C368.387 103.201 366.081 105.24 363.105 106.678C360.13 108.115 356.72 108.834 352.875 108.834H336.276V73.7309ZM352.474 100.911C355.483 100.911 357.89 100.058 359.695 98.3534C361.534 96.6483 362.453 94.2914 362.453 91.2825C362.453 88.2737 361.534 85.9168 359.695 84.2117C357.89 82.5067 355.483 81.6542 352.474 81.6542H346.205V100.911H352.474ZM395.409 109.536C391.698 109.536 388.355 108.751 385.379 107.179C382.437 105.608 380.114 103.435 378.409 100.66C376.737 97.8853 375.901 94.7595 375.901 91.2825C375.901 87.8056 376.737 84.6798 378.409 81.9049C380.114 79.1301 382.437 76.957 385.379 75.3857C388.355 73.8144 391.698 73.0288 395.409 73.0288C399.12 73.0288 402.446 73.8144 405.388 75.3857C408.364 76.957 410.687 79.1301 412.359 81.9049C414.064 84.6798 414.916 87.8056 414.916 91.2825C414.916 94.7595 414.064 97.8853 412.359 100.66C410.687 103.435 408.364 105.608 405.388 107.179C402.446 108.751 399.12 109.536 395.409 109.536ZM395.409 101.312C397.181 101.312 398.786 100.894 400.223 100.058C401.661 99.2226 402.797 98.0525 403.633 96.5481C404.469 95.0102 404.887 93.255 404.887 91.2825C404.887 89.3101 404.469 87.5716 403.633 86.0672C402.797 84.5293 401.661 83.3425 400.223 82.5067C398.786 81.6709 397.181 81.253 395.409 81.253C393.637 81.253 392.032 81.6709 390.595 82.5067C389.157 83.3425 388.021 84.5293 387.185 86.0672C386.349 87.5716 385.931 89.3101 385.931 91.2825C385.931 93.255 386.349 95.0102 387.185 96.5481C388.021 98.0525 389.157 99.2226 390.595 100.058C392.032 100.894 393.637 101.312 395.409 101.312ZM437.618 109.536C433.941 109.536 430.631 108.767 427.689 107.23C424.781 105.658 422.49 103.485 420.819 100.71C419.147 97.9355 418.311 94.7929 418.311 91.2825C418.311 87.7722 419.147 84.6296 420.819 81.8548C422.49 79.08 424.781 76.9236 427.689 75.3857C430.631 73.8144 433.941 73.0288 437.618 73.0288C440.828 73.0288 443.72 73.5971 446.294 74.7338C448.868 75.8705 451.008 77.5087 452.713 79.6483L446.394 85.3651C444.121 82.6237 441.363 81.253 438.12 81.253C436.214 81.253 434.509 81.6709 433.005 82.5067C431.534 83.3425 430.38 84.5293 429.545 86.0672C428.742 87.5716 428.341 89.3101 428.341 91.2825C428.341 93.255 428.742 95.0102 429.545 96.5481C430.38 98.0525 431.534 99.2226 433.005 100.058C434.509 100.894 436.214 101.312 438.12 101.312C441.363 101.312 444.121 99.9414 446.394 97.2L452.713 102.917C451.008 105.056 448.868 106.695 446.294 107.831C443.72 108.968 440.828 109.536 437.618 109.536ZM464.318 81.6041H453.536V73.7309H484.979V81.6041H474.247V108.834H464.318V81.6041ZM505.89 109.536C502.18 109.536 498.836 108.751 495.861 107.179C492.919 105.608 490.595 103.435 488.89 100.66C487.219 97.8853 486.383 94.7595 486.383 91.2825C486.383 87.8056 487.219 84.6798 488.89 81.9049C490.595 79.1301 492.919 76.957 495.861 75.3857C498.836 73.8144 502.18 73.0288 505.89 73.0288C509.601 73.0288 512.928 73.8144 515.87 75.3857C518.845 76.957 521.169 79.1301 522.84 81.9049C524.545 84.6798 525.398 87.8056 525.398 91.2825C525.398 94.7595 524.545 97.8853 522.84 100.66C521.169 103.435 518.845 105.608 515.87 107.179C512.928 108.751 509.601 109.536 505.89 109.536ZM505.89 101.312C507.662 101.312 509.267 100.894 510.705 100.058C512.142 99.2226 513.279 98.0525 514.115 96.5481C514.95 95.0102 515.368 93.255 515.368 91.2825C515.368 89.3101 514.95 87.5716 514.115 86.0672C513.279 84.5293 512.142 83.3425 510.705 82.5067C509.267 81.6709 507.662 81.253 505.89 81.253C504.119 81.253 502.514 81.6709 501.076 82.5067C499.639 83.3425 498.502 84.5293 497.666 86.0672C496.83 87.5716 496.413 89.3101 496.413 91.2825C496.413 93.255 496.83 95.0102 497.666 96.5481C498.502 98.0525 499.639 99.2226 501.076 100.058C502.514 100.894 504.119 101.312 505.89 101.312ZM545.944 99.5068H540.528V108.834H530.598V73.7309H546.646C549.822 73.7309 552.58 74.2658 554.92 75.3356C557.26 76.372 559.066 77.8764 560.336 79.8489C561.606 81.7879 562.242 84.078 562.242 86.7191C562.242 89.2599 561.64 91.4831 560.436 93.3888C559.266 95.2609 557.578 96.7319 555.371 97.8017L562.944 108.834H552.312L545.944 99.5068ZM552.212 86.7191C552.212 85.081 551.694 83.8105 550.657 82.9079C549.621 82.0052 548.083 81.5539 546.044 81.5539H540.528V91.8342H546.044C548.083 91.8342 549.621 91.3996 550.657 90.5303C551.694 89.6277 552.212 88.3573 552.212 86.7191Z"
    fill="white"
  />
</g>
<defs>
  <filter
    id="filter0_d_203_14"
    x="627.161"
    y="27.285"
    width="137.679"
    height="137.679"
    filterUnits="userSpaceOnUse"
    color-interpolation-filters="sRGB"
  >
    <feFlood flood-opacity="0" result="BackgroundImageFix" />
    <feColorMatrix
      in="SourceAlpha"
      type="matrix"
      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
      result="hardAlpha"
    />
    <feOffset dy="4.12435" />
    <feGaussianBlur stdDeviation="13.9197" />
    <feComposite in2="hardAlpha" operator="out" />
    <feColorMatrix
      type="matrix"
      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"
    />
    <feBlend
      mode="normal"
      in2="BackgroundImageFix"
      result="effect1_dropShadow_203_14"
    />
    <feBlend
      mode="normal"
      in="SourceGraphic"
      in2="effect1_dropShadow_203_14"
      result="shape"
    />
  </filter>
  <clipPath id="clip0_203_14">
    <rect width="796" height="183" fill="white" />
  </clipPath>
</defs>
</svg>`;

    loginBtn.id = "login";
    loginBtn.textContent = "Вхід";
    loginBtn.classList.add("header-container--button");
    createVisitBtn.classList.add("header-container--button");
    LogOutBtn.textContent = "Вихід";
    containerBtn.id = "createVisit";
    LogOutBtn.classList.add("header-container--buttonOut");
    containerBtn.classList.add("hide");
    createVisitBtn.textContent = "Створити визит";
    containerBtn.append(createVisitBtn, LogOutBtn);
    self.append(link, loginBtn, containerBtn);
    LogOutBtn.addEventListener("click", () => {
     confirm("Ви впевнені?")
     if (confirm) {
      document.querySelector(".card-wraper").innerHTML=""
     localStorage.removeItem("token")
     containerBtn.classList.add("hide");
     loginBtn.classList.remove("hide");
     }
    });
    loginBtn.addEventListener("click", () => {
      new LoginForm().render();
      loginBtn.classList.add("hide");
    });
    createVisitBtn.addEventListener("click", () => {
      document.querySelector(".header-container").classList.add("active");      
      new VisitModal(createVisitBtn.textContent).show()
    });
    super.render();
  }
}
new Header().render();
